var RFK;(()=>{var e={718:e=>{function t(e,t){for(let n=0;n<t.length;n++){const r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}e.exports={defineProperty:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},createClass:function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},inherits:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},createSuper:function(e){const t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){const n=r(e);let o;if(t){const e=r(this).constructor;o=Reflect.construct(n,arguments,e)}else o=n.apply(this,arguments);return s(this,o)}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{Actions:()=>ye,ContentBlock:()=>Qr,DataAdapter:()=>qt,DataProvider:()=>Lt,Discover:()=>bo,DiscoverActions:()=>y,DiscoverEvents:()=>u,EventTracker:()=>l,FullPageSearchEvents:()=>p,FunnelEvents:()=>t,PageContext:()=>Jt,PageController:()=>$t,PreviewSearch:()=>Po,PreviewSearchEvents:()=>d,Recommendation:()=>no,RecommendationActions:()=>_,RecommendationEvents:()=>h,Request:()=>Nt,SearchResults:()=>po,SearchResultsActions:()=>f,Widget:()=>Dr,WidgetControllers:()=>g,WidgetsConfig:()=>tt,clearCache:()=>$r,defaultRequests:()=>o,getRfkUserId:()=>Yr,init:()=>Fo,setUserId:()=>zr,ui:()=>c});var e={};n.r(e),n.d(e,{wA:()=>D,HY:()=>N,Tm:()=>te,kr:()=>ne,az:()=>R,Vf:()=>x,h:()=>R,ZB:()=>ee,YM:()=>v,sY:()=>Z,bR:()=>L});var t={};n.r(t),n.d(t,{trackAddToCart:()=>Je,trackOrderConfirm:()=>Qe,trackPDPView:()=>Ye,trackPageView:()=>Xe,trackStatusCart:()=>$e,trackUserLogin:()=>ze});var o={};n.r(o),n.d(o,{getDefaultRequestFor:()=>Vt,setDefaultRequestFor:()=>Wt});var s={};n.r(s),n.d(s,{hu:()=>On,wA:()=>D,HY:()=>N,Vx:()=>wn,nF:()=>ir,n4:()=>Dn,tK:()=>Wn,Tm:()=>nr,kr:()=>ne,az:()=>R,sw:()=>er,jz:()=>Ln,Vf:()=>x,m$:()=>or,Gp:()=>In,ZB:()=>Bn,l$:()=>tr,Vo:()=>Vn,X$:()=>Tn,sY:()=>Gn,uy:()=>rr,mm:()=>sr,I4:()=>_n,qp:()=>fn,Qb:()=>yn,d4:()=>ln,aP:()=>dn,bt:()=>un,Ye:()=>hn,_Y:()=>cn,sO:()=>pn,eJ:()=>an});var i={};n.r(i),n.d(i,{Component:()=>D,createContext:()=>ne,h:()=>R,html:()=>Cr,render:()=>Z});var a={};n.r(a),n.d(a,{AnyComponent:()=>e.AnyComponent,Children:()=>On,ClassAttributes:()=>e.ClassAttributes,Component:()=>D,ComponentChild:()=>e.ComponentChild,ComponentChildren:()=>e.ComponentChildren,ComponentClass:()=>e.ComponentClass,ComponentConstructor:()=>e.ComponentConstructor,ComponentFactory:()=>e.ComponentFactory,ComponentProps:()=>e.ComponentProps,ComponentType:()=>e.ComponentType,Consumer:()=>e.Consumer,ContainerRendererFactory:()=>Rr,Fragment:()=>N,FunctionalComponent:()=>e.FunctionalComponent,PureComponent:()=>wn,StrictMode:()=>ir,Suspense:()=>Dn,SuspenseList:()=>Wn,VNode:()=>e.VNode,WidgetFactory:()=>Tr,WidgetRenderer:()=>Ar,cloneElement:()=>nr,createContext:()=>ne,createElement:()=>R,createFactory:()=>er,createPortal:()=>Ln,createRef:()=>x,findDOMNode:()=>or,forwardRef:()=>In,hydrate:()=>Bn,isValidElement:()=>tr,lazy:()=>Vn,memo:()=>Tn,options:()=>v,render:()=>Gn,toChildArray:()=>L,unmountComponentAtNode:()=>rr,unstable_IdlePriority:()=>s.unstable_IdlePriority,unstable_ImmediatePriority:()=>s.unstable_ImmediatePriority,unstable_LowPriority:()=>s.unstable_LowPriority,unstable_NormalPriority:()=>s.unstable_NormalPriority,unstable_UserBlockingPriority:()=>s.unstable_UserBlockingPriority,unstable_batchedUpdates:()=>sr,unstable_now:()=>s.unstable_now,unstable_runWithPriority:()=>s.unstable_runWithPriority,useCallback:()=>_n,useContext:()=>fn,useDebugValue:()=>yn,useEffect:()=>ln,useImperativeHandle:()=>dn,useLayoutEffect:()=>un,useMemo:()=>hn,useReducer:()=>cn,useRef:()=>pn,useState:()=>an,useWidget:()=>fr,useWidgetVisibility:()=>gr});var c={};n.r(c),n.d(c,{Component:()=>D,ContainerRenderer:()=>Ir,WidgetFactory:()=>Sr,WidgetRenderer:()=>Pr,createContext:()=>ne,htm:()=>i,html:()=>Cr,preact:()=>a,render:()=>Z,setupWidget:()=>Er});var l={};n.r(l),n.d(l,{trackAppearEvent:()=>xr,trackWidgetClickEvent:()=>Nr,trackWidgetEvent:()=>Or});var u={};n.r(u),n.d(u,{trackChoiceChange:()=>Kr,trackClickToProduct:()=>Wr,trackClose:()=>Hr,trackNavigationChange:()=>jr,trackProductChange:()=>Vr,trackSwatchChange:()=>Ur});var p={};n.r(p),n.d(p,{trackFacetClick:()=>Fr,trackFullPageSearchClick:()=>Lr});var d={};n.r(d),n.d(d,{trackPreviewSearchClick:()=>Mr,trackPreviewSearchSuggestionClick:()=>Gr,trackPreviewSearchTopCategoriesClick:()=>Br,trackPreviewSuggestedCategoryClick:()=>qr});var h={};n.r(h),n.d(h,{trackRecommendationClick:()=>Jr});var _={};n.r(_),n.d(_,{NAVIGATION_NEXT:()=>eo,NAVIGATION_PREV:()=>to,PRODUCT_CLICKED:()=>Zr});var f={};n.r(f),n.d(f,{CLEAR_FILTERS:()=>uo,FACET_CLICKED:()=>so,KEYPHRASE_CHANGED:()=>lo,PAGE_NUMBER_CHANGED:()=>ao,PRODUCT_CLICKED:()=>oo,RESULTS_PER_PAGE_CHANGED:()=>co,SORT_CHANGED:()=>io});var y={};n.r(y),n.d(y,{CHOICE_CHANGED:()=>go,CLOSED:()=>fo,NAVIGATION_NEXT:()=>vo,NAVIGATION_PREV:()=>Co,OPENED:()=>_o,PRODUCT_CHANGED:()=>yo,REFRESH:()=>mo});var g={};n.r(g),n.d(g,{CONTROLLERS_MAPPING:()=>Ao,getByType:()=>Io});var m,v,C,b,k,E,S,w={},T=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(e,t){for(var n in t)e[n]=t[n];return e}function I(e){var t=e.parentNode;t&&t.removeChild(e)}function R(e,t,n){var r,o,s,i={};for(s in t)"key"==s?r=t[s]:"ref"==s?o=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?m.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===i[s]&&(i[s]=e.defaultProps[s]);return O(e,i,r,o,null)}function O(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++C:o};return null!=v.vnode&&v.vnode(s),s}function x(){return{current:null}}function N(e){return e.children}function D(e,t){this.props=e,this.context=t}function K(e,t){if(null==t)return e.__?K(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?K(e):null}function V(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return V(e)}}function W(e){(!e.__d&&(e.__d=!0)&&b.push(e)&&!U.__r++||E!==v.debounceRendering)&&((E=v.debounceRendering)||k)(U)}function U(){for(var e;U.__r=b.length;)e=b.sort((function(e,t){return e.__v.__b-t.__v.__b})),b=[],e.some((function(e){var t,n,r,o,s,i;e.__d&&(s=(o=(t=e).__v).__e,(i=t.__P)&&(n=[],(r=A({},o)).__v=o.__v+1,J(i,o,r,t.__n,void 0!==i.ownerSVGElement,null!=o.__h?[s]:null,n,null==s?K(o):s,o.__h),$(n,o),o.__e!=s&&V(o)))}))}function j(e,t,n,r,o,s,i,a,c,l){var u,p,d,h,_,f,y,g=r&&r.__k||T,m=g.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(h=n.__k[u]=null==(h=t[u])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h||"bigint"==typeof h?O(null,h,null,null,h):Array.isArray(h)?O(N,{children:h},null,null,null):h.__b>0?O(h.type,h.props,h.key,null,h.__v):h)){if(h.__=n,h.__b=n.__b+1,null===(d=g[u])||d&&h.key==d.key&&h.type===d.type)g[u]=void 0;else for(p=0;p<m;p++){if((d=g[p])&&h.key==d.key&&h.type===d.type){g[p]=void 0;break}d=null}J(e,h,d=d||w,o,s,i,a,c,l),_=h.__e,(p=h.ref)&&d.ref!=p&&(y||(y=[]),d.ref&&y.push(d.ref,null,h),y.push(p,h.__c||_,h)),null!=_?(null==f&&(f=_),"function"==typeof h.type&&null!=h.__k&&h.__k===d.__k?h.__d=c=H(h,c,e):c=F(e,h,d,g,_,c),l||"option"!==n.type?"function"==typeof n.type&&(n.__d=c):e.value=""):c&&d.__e==c&&c.parentNode!=e&&(c=K(d))}for(n.__e=f,u=m;u--;)null!=g[u]&&("function"==typeof n.type&&null!=g[u].__e&&g[u].__e==n.__d&&(n.__d=K(r,u+1)),Q(g[u],g[u]));if(y)for(u=0;u<y.length;u++)Y(y[u],y[++u],y[++u])}function H(e,t,n){var r,o;for(r=0;r<e.__k.length;r++)(o=e.__k[r])&&(o.__=e,t="function"==typeof o.type?H(o,t,n):F(n,o,o,e.__k,o.__e,t));return t}function L(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){L(e,t)})):t.push(e)),t}function F(e,t,n,r,o,s){var i,a,c;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||o!=s||null==o.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(o),i=null;else{for(a=s,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==o)break e;e.insertBefore(o,s),i=s}return void 0!==i?i:o.nextSibling}function M(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||P.test(t)?n:n+"px"}function q(e,t,n,r,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||M(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||M(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r||e.addEventListener(t,s?B:G,s):e.removeEventListener(t,s?B:G,s);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function G(e){this.l[e.type+!1](v.event?v.event(e):e)}function B(e){this.l[e.type+!0](v.event?v.event(e):e)}function J(e,t,n,r,o,s,i,a,c){var l,u,p,d,h,_,f,y,g,m,C,b=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,a=t.__e=n.__e,t.__h=null,s=[a]),(l=v.__b)&&l(t);try{e:if("function"==typeof b){if(y=t.props,g=(l=b.contextType)&&r[l.__c],m=l?g?g.props.value:l.__:r,n.__c?f=(u=t.__c=n.__c).__=u.__E:("prototype"in b&&b.prototype.render?t.__c=u=new b(y,m):(t.__c=u=new D(y,m),u.constructor=b,u.render=X),g&&g.sub(u),u.props=y,u.state||(u.state={}),u.context=m,u.__n=r,p=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=b.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=A({},u.__s)),A(u.__s,b.getDerivedStateFromProps(y,u.__s))),d=u.props,h=u.state,p)null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==b.getDerivedStateFromProps&&y!==d&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(y,m),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(y,u.__s,m)||t.__v===n.__v){u.props=y,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),u.__h.length&&i.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(y,u.__s,m),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(d,h,_)}))}u.context=m,u.props=y,u.state=u.__s,(l=v.__r)&&l(t),u.__d=!1,u.__v=t,u.__P=e,l=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(r=A(A({},r),u.getChildContext())),p||null==u.getSnapshotBeforeUpdate||(_=u.getSnapshotBeforeUpdate(d,h)),C=null!=l&&l.type===N&&null==l.key?l.props.children:l,j(e,Array.isArray(C)?C:[C],t,n,r,o,s,i,a,c),u.base=t.__e,t.__h=null,u.__h.length&&i.push(u),f&&(u.__E=u.__=null),u.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=z(n.__e,t,n,r,o,s,i,c);(l=v.diffed)&&l(t)}catch(e){t.__v=null,(c||null!=s)&&(t.__e=a,t.__h=!!c,s[s.indexOf(a)]=null),v.__e(e,t,n)}}function $(e,t){v.__c&&v.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){v.__e(e,t.__v)}}))}function z(e,t,n,r,o,s,i,a){var c,l,u,p=n.props,d=t.props,h=t.type,_=0;if("svg"===h&&(o=!0),null!=s)for(;_<s.length;_++)if((c=s[_])&&(c===e||(h?c.localName==h:3==c.nodeType))){e=c,s[_]=null;break}if(null==e){if(null===h)return document.createTextNode(d);e=o?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,d.is&&d),s=null,a=!1}if(null===h)p===d||a&&e.data===d||(e.data=d);else{if(s=s&&m.call(e.childNodes),l=(p=n.props||w).dangerouslySetInnerHTML,u=d.dangerouslySetInnerHTML,!a){if(null!=s)for(p={},_=0;_<e.attributes.length;_++)p[e.attributes[_].name]=e.attributes[_].value;(u||l)&&(u&&(l&&u.__html==l.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,r,o){var s;for(s in n)"children"===s||"key"===s||s in t||q(e,s,null,n[s],r);for(s in t)o&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||q(e,s,t[s],n[s],r)}(e,d,p,o,a),u)t.__k=[];else if(_=t.props.children,j(e,Array.isArray(_)?_:[_],t,n,r,o&&"foreignObject"!==h,s,i,s?s[0]:n.__k&&K(n,0),a),null!=s)for(_=s.length;_--;)null!=s[_]&&I(s[_]);a||("value"in d&&void 0!==(_=d.value)&&(_!==e.value||"progress"===h&&!_)&&q(e,"value",_,p.value,!1),"checked"in d&&void 0!==(_=d.checked)&&_!==e.checked&&q(e,"checked",_,p.checked,!1))}return e}function Y(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){v.__e(e,n)}}function Q(e,t,n){var r,o;if(v.unmount&&v.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Y(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){v.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Q(r[o],t,"function"!=typeof e.type);n||null==e.__e||I(e.__e),e.__e=e.__d=void 0}function X(e,t,n){return this.constructor(e,n)}function Z(e,t,n){var r,o,s;v.__&&v.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,s=[],J(t,e=(!r&&n||t).__k=R(N,null,[e]),o||w,w,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?m.call(t.childNodes):null,s,!r&&n?n:o?o.__e:t.firstChild,r),$(s,e)}function ee(e,t){Z(e,t,ee)}function te(e,t,n){var r,o,s,i=A({},e.props);for(s in t)"key"==s?r=t[s]:"ref"==s?o=t[s]:i[s]=t[s];return arguments.length>2&&(i.children=arguments.length>3?m.call(arguments,2):n),O(e.type,i,r||e.key,o||e.ref,null)}function ne(e,t){var n={__c:t="__cC"+S++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(W)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}m=T.slice,v={__e:function(e,t){for(var n,r,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},C=0,D.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=A({},this.state),"function"==typeof e&&(e=e(A({},n),this.props)),e&&A(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),W(this))},D.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),W(this))},D.prototype.render=N,b=[],k="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U.__r=0,S=0,"undefined"!=typeof window&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.5.14",v,{Fragment:N,Component:D});var re={};function oe(e){return e.type===N?"Fragment":"function"==typeof e.type?e.type.displayName||e.type.name:"string"==typeof e.type?e.type:"#text"}var se=[],ie=[];function ae(){return se.length>0?se[se.length-1]:null}var ce=!1;function le(e){return"function"==typeof e.type&&e.type!=N}function ue(e){for(var t=[e],n=e;null!=n.__o;)t.push(n.__o),n=n.__o;return t.reduce((function(e,t){e+="  in "+oe(t);var n=t.__source;return n?e+=" (at "+n.fileName+":"+n.lineNumber+")":ce||(ce=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),e+"\n"}),"")}var pe="function"==typeof WeakMap,de=D.prototype.setState;D.prototype.setState=function(e,t){return null==this.__v?null==this.state&&console.warn('Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.\n\n'+ue(ae())):null==this.__P&&console.warn('Can\'t call "this.setState" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+ue(this.__v)),de.call(this,e,t)};var he=D.prototype.forceUpdate;function _e(e){var t=e.props,n=oe(e),r="";for(var o in t)if(t.hasOwnProperty(o)&&"children"!==o){var s=t[o];"function"==typeof s&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),r+=" "+o+"="+JSON.stringify(s)}var i=t.children;return"<"+n+r+(i&&i.length?">..</"+n+">":" />")}D.prototype.forceUpdate=function(e){return null==this.__v?console.warn('Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.\n\n'+ue(ae())):null==this.__P&&console.warn('Can\'t call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+ue(this.__v)),he.call(this,e)},function(){!function(){var e=v.__b,t=v.diffed,n=v.__,r=v.vnode,o=v.__r;v.diffed=function(e){le(e)&&ie.pop(),se.pop(),t&&t(e)},v.__b=function(t){le(t)&&se.push(t),e&&e(t)},v.__=function(e,t){ie=[],n&&n(e,t)},v.vnode=function(e){e.__o=ie.length>0?ie[ie.length-1]:null,r&&r(e)},v.__r=function(e){le(e)&&ie.push(e),o&&o(e)}}();var e=!1,t=v.__b,n=v.diffed,r=v.vnode,o=v.__e,s=v.__,i=v.__h,a=pe?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,c=[];v.__e=function(e,t,n){if(t&&t.__c&&"function"==typeof e.then){var r=e;e=new Error("Missing Suspense. The throwing component was: "+oe(t));for(var s=t;s;s=s.__)if(s.__c&&s.__c.__c){e=r;break}if(e instanceof Error)throw e}try{o(e,t,n),"function"!=typeof e.then&&setTimeout((function(){throw e}))}catch(e){throw e}},v.__=function(e,t){if(!t)throw new Error("Undefined parent passed to render(), this is the second argument.\nCheck if the element is available in the DOM/has the correct id.");var n;switch(t.nodeType){case 1:case 11:case 9:n=!0;break;default:n=!1}if(!n){var r=oe(e);throw new Error("Expected a valid HTML node as a second argument to render.\tReceived "+t+" instead: render(<"+r+" />, "+t+");")}s&&s(e,t)},v.__b=function(n){var r=n.type,o=function e(t){return t?"function"==typeof t.type?e(t.__):t:{}}(n.__);if(e=!0,void 0===r)throw new Error("Undefined component passed to createElement()\n\nYou likely forgot to export your component or might have mixed up default and named imports"+_e(n)+"\n\n"+ue(n));if(null!=r&&"object"==typeof r){if(void 0!==r.__k&&void 0!==r.__e)throw new Error("Invalid type passed to createElement(): "+r+"\n\nDid you accidentally pass a JSX literal as JSX twice?\n\n  let My"+oe(n)+" = "+_e(r)+";\n  let vnode = <My"+oe(n)+" />;\n\nThis usually happens when you export a JSX literal and not the component.\n\n"+ue(n));throw new Error("Invalid type passed to createElement(): "+(Array.isArray(r)?"array":r))}if("thead"!==r&&"tfoot"!==r&&"tbody"!==r||"table"===o.type?"tr"===r&&"thead"!==o.type&&"tfoot"!==o.type&&"tbody"!==o.type&&"table"!==o.type?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+_e(n)+"\n\n"+ue(n)):"td"===r&&"tr"!==o.type?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+_e(n)+"\n\n"+ue(n)):"th"===r&&"tr"!==o.type&&console.error("Improper nesting of table. Your <th> should have a <tr>."+_e(n)+"\n\n"+ue(n)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+_e(n)+"\n\n"+ue(n)),void 0!==n.ref&&"function"!=typeof n.ref&&"object"!=typeof n.ref&&!("$$typeof"in n))throw new Error('Component\'s "ref" property should be a function, or an object created by createRef(), but got ['+typeof n.ref+"] instead\n"+_e(n)+"\n\n"+ue(n));if("string"==typeof n.type)for(var s in n.props)if("o"===s[0]&&"n"===s[1]&&"function"!=typeof n.props[s]&&null!=n.props[s])throw new Error("Component's \""+s+'" property should be a function, but got ['+typeof n.props[s]+"] instead\n"+_e(n)+"\n\n"+ue(n));if("function"==typeof n.type&&n.type.propTypes){if("Lazy"===n.type.displayName&&a&&!a.lazyPropTypes.has(n.type)){var i="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var c=n.type();a.lazyPropTypes.set(n.type,!0),console.warn(i+"Component wrapped in lazy() is "+oe(c))}catch(n){console.warn(i+"We will log the wrapped component's name once it is loaded.")}}var l=n.props;n.type.__f&&delete(l=function(e,t){for(var n in t)e[n]=t[n];return e}({},l)).ref,function(e,t,n,r,o){Object.keys(e).forEach((function(n){var s;try{s=e[n](t,n,r,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}!s||s.message in re||(re[s.message]=!0,console.error("Failed prop type: "+s.message+(o&&"\n"+o()||"")))}))}(n.type.propTypes,l,0,oe(n),(function(){return ue(n)}))}t&&t(n)},v.__h=function(t,n,r){if(!t||!e)throw new Error("Hook can only be invoked from render methods.");i&&i(t,n,r)};var l=function(e,t){return{get:function(){var n="get"+e+t;c&&c.indexOf(n)<0&&(c.push(n),console.warn("getting vnode."+e+" is deprecated, "+t))},set:function(){var n="set"+e+t;c&&c.indexOf(n)<0&&(c.push(n),console.warn("setting vnode."+e+" is not allowed, "+t))}}},u={nodeName:l("nodeName","use vnode.type"),attributes:l("attributes","use vnode.props"),children:l("children","use vnode.props.children")},p=Object.create({},u);v.vnode=function(e){var t=e.props;if(null!==e.type&&null!=t&&("__source"in t||"__self"in t)){var n=e.props={};for(var o in t){var s=t[o];"__source"===o?e.__source=s:"__self"===o?e.__self=s:n[o]=s}}e.__proto__=p,r&&r(e)},v.diffed=function(t){if(t.__k&&t.__k.forEach((function(e){if(e&&void 0===e.type){delete e.__,delete e.__b;var n=Object.keys(e).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+n+"}.\n\n"+ue(t))}})),e=!1,n&&n(t),null!=t.__k)for(var r=[],o=0;o<t.__k.length;o++){var s=t.__k[o];if(s&&null!=s.key){var i=s.key;if(-1!==r.indexOf(i)){console.error('Following component has two or more children with the same key attribute: "'+i+'". This may cause glitches and misbehavior in rendering process. Component: \n\n'+_e(t)+"\n\n"+ue(t));break}r.push(i)}}}}();const fe=e=>t=>`${e}/${t}`,ye={LOAD:"core/LOAD",REQUEST:"core/REQUEST",REQUEST_SUCCESS:"core/REQUEST_SUCCESS",REQUEST_FAIL:"core/REQUEST_FAIL",WIDGET_APPEAR:"core/WIDGET_APPEAR",PAGE_CONTAINER_READY:"core/PAGE_CONTAINER_READY",WIDGET_READY:"core/WIDGET_READY",INITIALIZE:"core/INITIALIZE",INITIALIZED:"core/INITIALIZED",RESET_WIDGET:"core/RESET_WIDGET",PAGE_CONTEXT_CHANGED:"core/PAGE_CONTEXT_CHANGED",ADD_TO_CART:"core/interaction/ADD_TO_CART",ORDER_CONFIRM:"core/interaction/ORDER_CONFIRM",USER_LOGIN:"core/interaction/USER_LOGIN",ADD_TO_WISHLIST:"core/interaction/ADD_TO_WISHLIST",CART_STATUS:"core/interaction/CART_STATUS",PRODUCT_CLICK:"core/interaction/PRODUCT_CLICK"},ge=e=>void 0===e,me=18e5,ve=Date.now(),Ce=window.location.hostname.split(".").reverse().splice(0,2).reverse().join("."),be={stagingApiDomain:"https://api-staging.rfksrv.com",uatApiDomain:"https://api-uat.rfksrv.com",prodApiDomain:"https://api.rfksrv.com",apiKey:"",customerKey:"",tokenPath:"/account/1/access-token",legacySearchPath:"/search-rec/{{key}}/3",legacyEventPath:"/event/{{key}}/1",env:"prod",serviceHost:"",searchPath:"/api/search-rec/3",eventPath:"/api/event/1",useToken:!1,userId:null,debug:!1},ke=(e,t)=>{be.hasOwnProperty(e)?be[e]=t:console.warn(`${e} is not a valid configuration property.`)},Ee=e=>be[e]||null,Se=()=>be.useToken?{apiDomain:be[`${be.env}ApiDomain`],searchPath:be.legacySearchPath.replace("{{key}}",be.customerKey),eventPath:be.legacyEventPath.replace("{{key}}",be.customerKey),useToken:be.useToken,tokenPath:be.tokenPath,apiKey:be.apiKey,customerKey:be.customerKey,debug:be.debug}:{apiDomain:be.serviceHost,searchPath:be.searchPath,useToken:be.useToken,customerKey:be.customerKey,eventPath:be.eventPath,debug:be.debug};class we{constructor(){var e,t;t={},(e="cachedCookies")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}isBase64(e){return!!e&&0===e.indexOf("0!")}decodeCookieValue(e){let t=(e=>window.decodeURIComponent(e))(e);return t=this.isBase64(t)?((e,t)=>{if(e&&"object"==typeof e||"{"===(e&&e[0]))return e;const n={},r=[65,91],o=[97,123],s=[48,58],i=String.fromCharCode;let a,c,l=0,u="";const p=[r,o,s,43,47];for(a in p)if(p[a]&&"object"==typeof p[a])for(c=p[a][0];c<p[a][1];c++)n[i(c)]=l++;else n[i(p[a])]=l++;for(c=0;c<e.length-0;c+=72){const t=e.substring(c,c+72);let r,o,s,a=0,l=0;for(o=0;o<t.length;o++)for(r=n[t.charAt(o)],a=(a<<6)+r,l+=6;l>=8;)s=(a>>>(l-=8))%256,s&&(u+=i(s))}return u})(t.substr(2)):t,t}getCookieValue(e,t){const n=e.substr(t.length+1,e.length);return n?this.decodeCookieValue(n):""}getCookieFromBrowser(e){const t=document.cookie.split("; ");for(let n=0;n<t.length;n++)if(t[n].substr(0,e.length)===e){const r=this.getCookieValue(t[n],e);return this.cachedCookies[e]=r,r}return""}setCookieInBrowser(e,t,n,r){const o=new Date;let s=r&&t?"0!"+((e,t)=>{e&&"object"==typeof e&&(e=JSON.stringify(e));const n=[],r=[];let o,s,i=0,a=0,c=t?"":"1,";const l=String.fromCharCode;for(e=((e,t)=>{e=e.replace(/\r\n/g,"\n");const n=String.fromCharCode;let r,o,s="";for(r=0;r<e.length;r++)o=e.charCodeAt(r),s+=o<128?n(o):o>127&&o<2048?n(o>>6|192)+n(63&o|128):n(o>>12|224)+n(o>>6&63|128)+n(63&o|128);return s})(e);i<e.length;){for(o=0;o<3;o++)n[o]=e.charCodeAt(i++);for(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],isNaN(n[1])?r[2]=r[3]=64:isNaN(n[2])&&(r[3]=64),o=0;o<4;o++)s=r[o],"1"===t?c+=s<26?l(s+65):s<52?l(s+71):s<62?l(s-4):"+/,".charAt(s-62):(t&&s<64&&(s^=t.charCodeAt(a%t.length)%64,a++),c+=s<10?l(s+48):s<36?l(s+87):s<62?l(s+29):"-_,".charAt(s-62))}return c})(t,"1").replace(/,/g,"~"):encodeURIComponent(t);o.setMilliseconds(o.getMilliseconds()+n),s+=`;domain=${Ce};path=/;`,s+=n?`;expires=${o.toUTCString()}`:"",s+=";secure;SameSite=None;",document.cookie=`${e}=${s}`}removeCookieFromBrowser(e){document.cookie=`${e}=;domain=${Ce};path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;secure;SameSite=None`}removeCachedCookie(e){this.cachedCookies[e]&&delete this.cachedCookies[e],this.removeCookieFromBrowser(e)}set(e,t,n,r){if(t){const o="object"==typeof t?JSON.stringify(t):t;this.cachedCookies[e]=o,this.setCookieInBrowser(e,o,n,r)}else this.removeCachedCookie(e)}get(e){if(this.cachedCookies[e])return this.cachedCookies[e];const t=this.getCookieFromBrowser(e);return this.cachedCookies[e]=t,t}remove(e){this.removeCachedCookie(e)}getCookiesFromBrowser(){const e=document.cookie.split(";");let t;const n={};for(let r=0;r<e.length;r++)if(e[r].substr(0,4).indexOf("__r")>=0&&(t=e[r].match(/\s*([^=]*)=(.*)/),t&&t.length>2)){const e=this.decodeCookieValue(t[2]);n[t[1]]=e,this.cachedCookies[t[1]]=e}return n}getAllCookies(){return this.getCookiesFromBrowser()}clearCache(){this.cachedCookies={}}clearAll(){const e=Object.keys(this.getAllCookies());this.clearCache();for(let t=0;t<e.length;t++)this.removeCachedCookie(e[t])}}class Te{clearAll(){Object.keys(localStorage).filter((e=>"__r"===e.substring(0,3))).forEach((e=>{localStorage.removeItem(e)}))}set(e,t,n){const r={v:t,tm:(new Date).getTime()||0,tx:n};void 0!==t?localStorage.setItem(e,JSON.stringify(r)):localStorage.removeItem(e)}get(e){const t=(new Date).getTime()||0;let n=JSON.parse(localStorage.getItem(e));return n.tx&&t-n.tm>n.tx&&(localStorage.removeItem(e),n=void 0),n&&n.v}remove(e){localStorage.removeItem(e)}}let Pe;const Ae=class{static init(e){Pe=e&&window.localStorage?new Te:new we}static set(e,t,n=!1,r){Pe.set(e,t,r||3e5,n)}static get(e){let t=Pe.get(e);const n=t?(e=>{try{return JSON.parse(e)}catch(t){return e}})(t):{};return"undefined"===t&&(t=void 0),t&&n?n:t}static remove(e){Pe.remove(e)}},Ie={},Re=()=>{const e=String(Ee("customerKey")).split("-");return 2===e.length&&e[1]||""},Oe=()=>{let e=0,t=Ae.get("__rutma");return Ae.get("__rutmb")||(Ae.set("__rutmb",Re(),!1,me),e=1),t=t?((e,t)=>{const n=e.split(".");return n.length>3&&(t&&(n[1]=n[2],n[2]=ve,n[3]=1*n[3]+1),4===n.length&&(n[4]=1),5===n.length&&(n[5]=1),n[4]=1*n[4]+1,n[5]=1+(t?0:1*n[5]),e=n.join(".")),e})(t,e):`${(()=>{let e=Ae.get("__ruid");if(e)return e;e=("xx-xx-4x-1"+"pc"[0]+"-").replace(/[x]/g,(()=>{return e=36*Math.random()|0,String.fromCharCode(e<10?e+48:e<36?e+87:e+29);var e}));for(let t=0;t<5;t++)e+=("0000"+(1679615*Math.random()|0).toString(36)).slice(-4);const t=Re()+"-"+e+"-"+ve;return Ae.set("__ruid",t,!1),t})()}.${ve}.${ve}.1.1.1`,Ae.set("__rutma",t,!1,me),t},xe=()=>{const e=Ee("userId");if(e)return{user_id:e};const{uid:t}=(()=>{const{customerKey:e}=Se();Ie.domainHashCkey=e.match(/(.*)-(\d*)/)[2],Ie.domainHash=Ie.domainHashCkey,Ie.domainRoot=Ce;const t=Oe(),n=t.split(".");var r;return Ie.uid=n[0],Ie.usetLastDigit=(r=n[0],(Array.isArray(r)||"string"==typeof r)&&r.length?r[r.length-1]:void 0),Ie.previousSessionStartTime=parseInt(n[1]),Ie.currentSessionStartTime=parseInt(n[2]),Ie.visitCount=parseInt(n[3]),Ie.pageViewCount=parseInt(n[4]),Ie.visitPageCount=parseInt(n[5]),Ie.utma=t,Ie})();return{uuid:t}},Ne=e=>{const t=new Headers;return t.append("Content-Type","application/json"),t.append("Access-Control-Request-Headers","authorization,content-type"),t.append("Access-Control-Request-Method","POST"),t.append("x-api-key",e),t},De=e=>{const t=new Headers;return t.append("Content-Type","application/json"),t.append("Access-Control-Request-Headers","authorization,content-type"),t.append("Access-Control-Request-Method","POST"),e&&t.append("Authorization",`Bearer ${e}`),t};let Ke=null,Ve=null,We=null;const Ue=async()=>{if(Ke&&Ve&&We&&(new Date).getTime()-Ve<=We)return Ke;try{const{tokenPath:e,apiKey:t,apiDomain:n}=Se(),r=await fetch(`${n}${e}`,{method:"POST",body:JSON.stringify({scope:["search-rec","event"]}),headers:Ne(t)}),o=await r.json(),{accessToken:s,accessTokenExpiry:i}=o;return Ve=(new Date).getTime(),Ke=s,We=i,Ke}catch(e){return null}},je=window,He=class{constructor(e){this.name=e,this.cache={},je.RFK_CACHE||(je.RFK_CACHE={}),je.RFK_CACHE[e]=this.cache}hashKey(e){let t,n,r,o=0;for(t=0,r=e.length;t<r;t++)n=e.charCodeAt(t),o=(o<<5)-o+n,o|=0;return o}sortObjectKeys(e){return null==e?"":"object"!=typeof e?e:Object.keys(e).sort().reduce(((t,n)=>(Array.isArray(e[n])?t[n]=e[n].map((e=>this.sortObjectKeys(e))):"object"==typeof e[n]?t[n]=this.sortObjectKeys(e[n]):t[n]=e[n],t)),{})}createKey(e){const t=JSON.stringify(this.sortObjectKeys(e));return Ee("debug")?(console.debug("SDK ::: cache ::: createKey",e),t):String(this.hashKey(t))}has(e){return e in this.cache}get(e){return this.cache[e]}set(e,t){this.cache[e]=t}all(){return this.cache}clear(){this.cache={},window.RFK_CACHE[this.name]=this.cache}getName(){return this.name}},Le=new He("api-adapter"),Fe={cache:!0};class Me{static async trackEvent(e){console.debug("SDK ::: trackEvent ",e);const{useToken:t,apiDomain:n,eventPath:r}=Se(),o=t?await Ue():null;try{const t=await fetch(`${n}${r}`,{method:"POST",headers:De(o),body:JSON.stringify(e),keepalive:!0});return await t.json()}catch(e){return console.error(e),console.error("There was a problem on the service call"),null}}static async callApiWithoutCache(e){try{const{url:t,...n}=e,r=await fetch(t,{...n,body:JSON.stringify(n.body)});return await r.json()}catch(e){return console.error(e),console.error("There was a problem on the service call"),null}}static async callApiWithCache(e){const t=Le.createKey(e);if(Le.has(t))return Le.get(t);const n=await Me.callApiWithoutCache(e);return Le.set(t,n),n}static async callApi(e,t=Fe){console.debug("SDK ::: callApi ",e);const{useToken:n,apiDomain:r,searchPath:o}=Se(),s=n?await Ue():null,i={url:`${r}${o}`,method:"POST",headers:De(s),body:e};return t.cache?Me.callApiWithCache(i):Me.callApiWithoutCache(i)}static clearCache(){Le.clear(),Ke=null,Ve=null,We=null}}const qe=async e=>{if(e.data)return e.data={...e.data,...xe(),t:Date.now()},await Me.trackEvent(e);throw new Error("eventUtils.track: params.data is not defined.")},Ge=e=>!e.find((({sku:e,quantity:t,price:n})=>ge(e)||ge(t)||ge(n))),Be=({email:e,id:t})=>!ge(e)&&!ge(t),Je=async(e,t,n)=>{if(Ge(e)){const r={data:{type:"a2c",name:t,value:{products:e.map((({sku:e,quantity:t,price:n,priceOriginal:r})=>({sku:e,quantity:t,price:n,price_original:r}))),...n?{context:n}:[]}}};return qe(r)}return Promise.reject(new Error("A field is missing on one or more of the products provided."))},$e=async(e,t)=>{if(Ge(e)){const n={data:{type:"status",name:"cart",value:{products:e.map((({sku:e,quantity:t,price:n,priceOriginal:r})=>({sku:e,quantity:t,price:n,price_original:r}))),...t?{context:t}:[]}}};return qe(n)}return Promise.reject(new Error("A field is missing on one or more of the products provided."))},ze=async(e,t)=>{if(Be(e)){const n={data:{type:"user",name:"login",value:{user:{id:e.id,email:e.email,eid:e.emailId},...t?{context:t}:[]}}};return qe(n)}return Promise.reject(new Error("User information is not correct"))},Ye=async(e,t=null,n)=>{if(e){const r={data:{type:"view",name:"pdp",value:{products:[{sku:e,...t?{fitment:t}:[]}],...n?{context:n}:[]}}};return qe(r)}return Promise.reject(new Error("sku not provided."))},Qe=async(e,t,n,r)=>{if(!Ge(e))return Promise.reject(new Error("A field is missing on one or more of the products provided, event not sent."));if(!Be(t))return Promise.reject(new Error("User information is not correct, event not sent"));if(!(({orderId:e,total:t,subtotal:n})=>!ge(e)&&!ge(t)&&!ge(n))(n))return Promise.reject(new Error("Checkout information is not correct, event not sent."));const o={data:{type:"order",name:"confirm",value:{products:e.map((({sku:e,quantity:t,price:n,priceOriginal:r})=>({sku:e,quantity:t,price:n,price_original:r}))),user:{id:t.id,email:t.email,eid:t.emailId},checkout:{order_id:n.orderId,total:n.total,subtotal:n.subtotal},...r?{context:r}:[]}}};return qe(o)},Xe=async e=>{const t={data:{type:"view",name:"page",value:{...e?{context:e}:[]}}};return qe(t)};function Ze(e){return e&&"object"==typeof e&&!Array.isArray(e)}function et(e,t,{mutate:n=!1}={}){const r=n?e:Object.assign({},e);return Ze(e)&&Ze(t)&&Object.keys(t).forEach((n=>{Ze(t[n])?n in e?r[n]=et(e[n],t[n]):Object.assign(r,{[n]:t[n]}):Object.assign(r,{[n]:t[n]})})),r}const tt={typesConfigMapping:{},configMapping:{},setTypes(e){Object.assign(this.typesConfigMapping,e)},getType(e){const{type:t}=this.configMapping[e]||{};return t},set(e,t){this.configMapping[e]=t},get(e){const t=this.configMapping[e];if(!t)return;const{Component:n,Controller:r,options:o}=this.getForType(e)||{},{Component:s=n,Controller:i=r,options:a}=t;return{...t,Component:s,Controller:i,options:a?et(o||{},a):o}},getForType(e){const t=this.getType(e);return t?this.typesConfigMapping[t]:void 0},getOrCreate(e){return this.configMapping[e]||(this.configMapping[e]={}),this.configMapping[e]},getMetadata(e){const{metadata:t}=this.get(e)||{};return t},setMetadata(e,t){Object.assign(this.getOrCreate(e),{metadata:t}),this.setType(e,t.type)},updateMetadata(e,t){et(this.getOrCreate(e),{metadata:t},{mutate:!0}),this.setType(e,t.type)},setType(e,t){this.getType(e)||Object.assign(this.getOrCreate(e),{type:t})},update(e,t){et(this.getOrCreate(e),t,{mutate:!0})},getController(e){const{Controller:t}=this.get(e)||{};return t}};let nt,rt,ot,st,it,at;!function(e){e.RECOMMENDATION="recommendation",e.PREVIEW_SEARCH="preview_search",e.SEARCH_RESULTS="content_grid",e.CONTENT_BLOCK="content_block",e.HTML_BLOCK="html_block",e.BANNER="banner",e.SEO="seo",e.DISCOVER="discover"}(nt||(nt={})),function(e){e.DESKTOP="pc",e.MOBILE="mobile",e.TABLET="tablet"}(rt||(rt={})),function(e){e.JS="js",e.HTML="html",e.CSS="css"}(ot||(ot={})),function(e){e.BROWSER="browser",e.WEBVIEW="webview",e.NATIVE="native"}(st||(st={})),function(e){e.PAGE="page",e.COMMON_ACROSS_PAGES="common_across_pages"}(it||(it={})),function(e){e.ASC="asc",e.DESC="desc"}(at||(at={}));const ct=[rt.DESKTOP,rt.MOBILE,rt.TABLET],lt=[ot.HTML,ot.CSS,ot.JS],ut=(e,t,n)=>{if(!t)return n;if("string"==typeof t)return e[t];const[r,...o]=t;return r in e&&(o.length?ut(e[r],o,n):e[r])||n},pt=(e,t)=>e&&e[t]?(delete e[t],e):e,dt=(e,t,n)=>{if(!t)return;if("string"==typeof t)return void 0===n?pt(e,t):Object.assign(e,{[t]:n});const[r,...o]=t;if(void 0===r)return n;const s=e||(Number.isInteger(r)?[]:{}),i=dt(s[r],o,n);return void 0===i?pt(e,r):Object.assign(s,{[r]:i})};function ht(e,t){const n={},r=Object.keys(e);for(let o=0;o<r.length;o++){const s=r[o];-1===t.indexOf(s)&&(n[s]=e[s])}return n}const _t=(e,t,n="")=>{const r=(e=>{const t=e.split("_");return`${t[0]}${t.slice(1).map((e=>e[0].toUpperCase()+e.slice(1))).join("")}`})(t);return`${e}${r[0].toUpperCase()+r.slice(1)}${n}`};var ft=n(718);function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class gt{constructor(){yt(this,"listeners",[]),yt(this,"data",{})}set(e,t,n){if(e in this.props){const o=this.getPropExportKey(e,n);if(this.get(e,void 0)!==t){const n=this.props[e];var r;void 0===t?this.removeKey(null===(r=n.parent)||void 0===r?void 0:r.key,n.keyPath[0]):dt(this.data,o,t),this.onChange(e,t)}}return this}get(e,t,n){return e in this.props?ut(this.data,this.getPropExportKey(e,n),t):t}resetValue(e,t){if(e in this.props){const n=this.props[e],r=n.initialValue?n.initialValue():void 0;return void 0===r&&t&&n.parent&&"map"===n.parent.type?this.removeKey(n.parent.key,t):this.set(e,r,t)}return this}getMapExportKey(e,t){return e.map((e=>"#KEY#"===e?t:e))}getPropExportKey(e,t){if(e in this.props){const n=this.props[e].exportKey;return t?this.getMapExportKey(n,t):n}return[]}getValue(e,t,n){return e in this.props?this.get(e,t,n):t}setValue(e,t,n){return e in this.props?"array"===this.props[e].type&&0===t.length?this.resetValue(e,n):this.set(e,t,n):this}removeKey(e,t){if(!e)return this.data=ht(this.data,[t]),this;let n=ht(this.getValue(e,{}),[t]);return 0===Object.keys(n).length&&(n=void 0),this.setValue(e,n)}updateValue(e,t,n){return this.setValue(e,et(this.getValue(e,{},n),t),n)}addValue(e,t,n){return e in this.props&&"array"===this.props[e].type?this.setValue(e,this.getValue(e,[],n).concat(t),n):this}removeValue(e,t,n=(e=>e!==t),r){return e in this.props&&"array"===this.props[e].type&&this.setValue(e,this.getValue(e,[],r).filter((e=>n(e,t))),r),this}transformJson(e){return e}toJson(...e){return 0===Object.keys(this.data).length?this.transformJson(void 0):0===e.length?this.transformJson(this.data):this.transformJson((t=this.data,e.reduce(((e,n)=>Object.hasOwnProperty.call(t,n)?dt(e,[n],ut(t,n)):e),{})));var t}onChange(e,t){this.listeners.forEach((n=>{n.onChange(this,e,t)}))}addListeners(e){e.forEach((e=>this.addListener(e)))}addListener(e){this.listeners.find((t=>t===e))||this.listeners.push(e)}}const mt=(e,{parentType:t},n,r=0)=>{if("map"===t){if(e.length<n-r+1)throw new Error("Invalid number of arguments");if("string"!=typeof e[0])throw new Error(`Invalid map key argument: ${e[0]}`);const t=e.slice(1);return[...Array(n).fill(void 0).map(((e,n)=>t[n])),e[0]]}return e},vt=(e,t,n,r,o)=>{const s={};return Object.keys(t).forEach((i=>{const{key:a,methodKey:c,config:l,config:{accessProp:u,exportKey:p,setter:d,getter:h,type:_,model:f,initialValue:y}}=((e,t,n)=>{var r;const{exportKey:o=[e],getter:s,setter:i,name:a}=n,c="map"===(null==t?void 0:t.type),l=t?`${t.key}.${a||e}`:a||e,u=t?`${t.accessProp}.${e}`:e,p=[...c?["#KEY#"]:[],...o],d=(null==t||null===(r=t.exportKey)||void 0===r?void 0:r.concat(...p))||p,h=l.replace(/\./g,"_"),_=s||_t("get",h),f=i||_t("set",h);return{config:{...n,key:l,accessProp:u,exportKey:d,keyPath:p,getter:_,setter:f,parent:t},key:l,methodKey:h}})(i,e,t[i]),g={type:_,...o};s[a]=l;const m=y?y():void 0;if(void 0===m||a.includes("#KEY#")||dt(n,p,m),r.push({typeOptions:g,prop:u,key:h,value:function(...e){return this.getValue(a,...mt(e,g,1,1))}}),r.push({typeOptions:g,prop:u,key:d,value:function(...e){return this.setValue(a,...mt(e,g,1))}}),r.push({typeOptions:g,prop:u,key:_t("reset",c),value:function(...e){return this.resetValue(a,...mt(e,g,0))}}),"array"===_){const e=c.replace(/s$/,"").replace(/ie$/,"y");r.push({typeOptions:g,prop:u,key:_t("add",e),value:function(...e){return this.addValue(a,...mt(e,g,1))}}),r.push({typeOptions:g,prop:u,key:_t("remove",e),value:function(...e){return this.removeValue(a,...mt(e,g,2,1))}})}else"model"===_&&f?(Object.assign(s,vt(l,f.properties,n,r,o)),r.push({typeOptions:g,prop:u,key:_t("update",c),value:function(...e){return this.updateValue(a,...mt(e,g,1))}})):"map"===_&&f&&Object.assign(s,vt(l,f.properties,n,r,{parentType:_,...o}))})),s},Ct=e=>{const{name:t,properties:n={}}=e,r={},o=[],s=vt(null,n,r,o);(0,ft.inherits)(a,gt);const i=(0,ft.createSuper)(a);function a(...e){const t=i.call.apply(i,[this].concat(e));return(0,ft.defineProperty)(t,"listeners",[]),(0,ft.defineProperty)(t,"props",s),(0,ft.defineProperty)(t,"data",JSON.parse(JSON.stringify(r))),t}return(0,ft.createClass)(a,o),Object.defineProperty(a,"name",{value:t}),a},bt={name:"Appearance",properties:{templates:{type:"model",model:{name:"Templates",properties:{sections:{type:"array"},devices:{type:"array"},keep_variables:{},keep_original_css:{}}}},variables:{type:"model",model:{name:"Variables",properties:{sections:{type:"array"}}}}}},kt={name:"Content",properties:{product:{},article:{},store:{}}},Et={name:"ContextValues",properties:{geo:{type:"model",model:{name:"ContextValuesGeo",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},user:{type:"model",model:{name:"ContextValuesUser",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},browser:{type:"model",model:{name:"ContextValuesBrowser",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},page:{type:"model",model:{name:"ContextValuesPage",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},campaign:{type:"model",model:{name:"ContextValuesCampaign",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},product:{type:"model",model:{name:"ContextValuesProduct",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},category:{type:"model",model:{name:"ContextValuesCategory",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},hard_filter:{type:"model",model:{name:"ContextValuesHardFilter",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}},channel:{type:"model",model:{name:"ContextValuesChannel",properties:{value:{type:"array",exportKey:["field","value"],name:"items"}}}}}},St={name:"Features",properties:{discover:{type:"model",model:{name:"Discover",properties:{choice_id:{required:!0}}}}}},wt={name:"Filters",properties:{value:{required:!0,type:"array",name:"values"}}},Tt={name:"SortItem",properties:{type:{required:!0},order:{required:!0}}},Pt={name:"Facet",properties:{min_count:{},max:{},total:{},sort:{type:"model",model:Tt,exportKey:["sort",0],name:"SortCriteria"}}},At={name:"Query",properties:{keyphrase:{exportKey:["keyphrase","value",0]},category:{type:"array",name:"categories"}}},It={name:"Sort",properties:{choices:{},value:{type:"model",model:Tt,exportKey:["value",0],name:"criteria"}}},Rt={name:"Widget",properties:{all:{},rfkid:{}}},Ot={name:"Context",file:"context",buildInterface:!0,properties:{store:{type:"model",model:{name:"ContextStore",file:"store",properties:{id:{},group_id:{}}}},user:{type:"model",model:{name:"ContextUser",file:"user",properties:{groups:{type:"array"},order_id:{type:"array",name:"orderIds"},gender:{},email:{},uuid:{},id:{exportKey:["user_id"]},new_user:{}}}},page:{type:"model",model:{name:"ContextPage",file:"page",properties:{skus:{type:"array",exportKey:["sku"]},product_groups:{type:"array",exportKey:["product_group"]},category_uri:{},uri:{},ccid:{},category_id:{},locale_country:{},locale_language:{},locale_currency:{},referrer:{},title:{},container_id:{},all_category_ids:{type:"array"}}}},campaign:{type:"model",model:{name:"ContextCampaign",file:"campaign",properties:{utm_campaign:{},utm_source:{}}}},geo:{type:"model",model:{name:"ContextGeo",file:"geo",properties:{ip:{},country:{},state:{},city:{},zip:{}}}},fitment:{type:"model",model:{name:"ContextFitment",file:"fitment",properties:{ids:{type:"array"},items:{type:"array"}}}},browser:{type:"model",model:{name:"ContextBrowser",file:"browser",properties:{user_agent:{},device:{},app_type:{}}}},channel:{type:"model",model:{name:"ContextChannel",file:"channel",properties:{type:{}}}}}},xt=Ct({name:"RfkRequest",file:"rfkRequest",buildInterface:!0,properties:{number_products:{exportKey:["n_item"]},page_number:{},appearance:{type:"model",model:bt},facets:{type:"map",exportKey:["facet"],model:Pt,name:"facet"},facets_all:{exportKey:["facet","all"]},facets_max:{exportKey:["facet","max"]},facets_total:{exportKey:["facet","total"]},facets_sort:{type:"model",model:Tt,exportKey:["facet","sort","value",0],name:"FacetsSortCriteria"},filters:{type:"map",model:wt,exportKey:["filter"],name:"filter"},widget:{type:"model",model:Rt},batch:{type:"array",model:{name:"BatchItem",properties:{appearance:{type:"model",model:bt},facets:{type:"map",exportKey:["facet"],model:Pt,name:"facet"},facets_all:{exportKey:["facet","all"]},facets_max:{exportKey:["facet","max"]},facets_total:{exportKey:["facet","total"]},facets_sort:{type:"model",model:Tt,exportKey:["facet","sort","value",0],name:"FacetsSortCriteria"},filter:{type:"model",model:wt},widget:{type:"model",model:Rt,required:!0},features:{type:"model",model:St},content:{type:"model",model:kt},sort:{type:"model",model:It},query:{type:"model",model:At},context_values:{type:"model",model:Et}}},name:"batchItems"},features:{type:"model",model:St},context:{type:"model",model:Ot},content:{type:"model",model:kt},sort:{type:"model",model:It},query:{type:"model",model:At},suggestion:{type:"model",model:{name:"Suggestion",properties:{keyphrase:{exportKey:["keyphrase","max"]},category:{exportKey:["category","max"]},recent:{exportKey:["recent","max"]},trending_category:{exportKey:["trending_category","max"]}}}},context_values:{type:"model",model:Et}}});class Nt extends xt{constructor(...e){var t;super(...e),(t="rfkId")in this?Object.defineProperty(this,t,{value:"",enumerable:!0,configurable:!0,writable:!0}):this[t]=""}getRfkId(){return this.rfkId}setRfkId(e){return this.rfkId=e,this.addBatchItem({widget:{rfkid:e}}),this}getWidgetInfo(e){var t;return null===(t=this.getBatchItems())||void 0===t?void 0:t.find((({widget:t})=>t.rfkid&&t.rfkid===e))}addWidgetBatchItem(e,t){return this.addBatchItem({...t,widget:{rfkid:e}}),this}addAllWidgetsBatchItem(e){return this.addBatchItem({...e,widget:{all:!0}}),this}addAllAppearanceTemplatesDevices(){return ct.forEach((e=>this.addAppearanceTemplatesDevice(e))),this}addAllAppearanceTemplatesSections(){return lt.forEach((e=>this.addAppearanceTemplatesSection(e))),this}addAllAppearanceVariablesSections(){return lt.forEach((e=>this.addAppearanceVariablesSection(e))),this}}const Dt=()=>{const e=new Nt;return e.setAppearanceTemplates({}),e.setAppearanceVariables({}),e},Kt={[nt.RECOMMENDATION]:()=>{const e=new Nt;return e.setContentProduct({}),e},[nt.DISCOVER]:()=>{const e=new Nt;return e.setContentProduct({}),e.setContextValuesProduct({}),e},[nt.SEARCH_RESULTS]:()=>{const e=new Nt;return e.setContentProduct({}),e.setFacetsAll(!0),e.setPageNumber(1),e.setSortChoices(!0),e},[nt.PREVIEW_SEARCH]:()=>{const e=new Nt;return e.setContentProduct({}),e.setSuggestionKeyphrase(3),e.setSuggestionCategory(3),e.setSuggestionTrendingCategory(3),e},[nt.CONTENT_BLOCK]:Dt,[nt.HTML_BLOCK]:Dt,[nt.SEO]:Dt,[nt.BANNER]:Dt},Vt=e=>Kt[e]?Kt[e]():new Nt,Wt=(e,t)=>{Kt[e]=t},Ut=class extends Nt{constructor(e,t){super();const n=Vt(nt.CONTENT_BLOCK).toJson(),r=Vt(nt.RECOMMENDATION).toJson(),o=Vt(nt.DISCOVER).toJson(),s=Vt(nt.SEARCH_RESULTS).toJson();if(e.forEach((e=>{const t=tt.getType(e),n=t?Vt(t).toJson():void 0;this.addWidgetBatchItem(e,n)})),t){const e=et(r,et(o,et(s,n)));this.addAllWidgetsBatchItem(e)}}};class jt{constructor(){var e,t,n;e=this,t="cache",n=new He("data-provider"),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getCache(){return this.cache}setCache(e){this.cache=e}buildCachedResponse(e){return{...this.cache.get(e),cached:!0}}getCachedResponse(e,t){const n=this.cache.createKey(e);return!t.force&&this.cache.has(n)?{cacheKey:n,response:this.buildCachedResponse(n)}:{cacheKey:n,response:null}}validateResponse(e,t){return"number"==typeof e.err&&200!==e.err?e:null}getWidgetType(e,t,n){const{widget:{type:r}}=t;return r}getWidgetResponseForType(e,t,{batch:n,...r}){return et(r,Vt(e).toJson())}getAllWidgetResponse(e,t,n){const r=this.getWidgetType(e,t,n);return r?this.getWidgetResponseForType(r,t,n):n}getWidgetResponse(e,t){return{...t,widget:void 0,batch:[{widget:{rfkid:e}}]}}getWidgetResponseCacheKey(e,t){const n=this.getRequestWidgetFromBatch(e,t);return Object.assign({},t,this.getWidgetResponse(e,n))}getAllWidgetResponseCacheKey(e,t,n){return Object.assign({},this.getAllWidgetResponse(e,t,n),this.getWidgetResponse(e))}cacheWidgetResponse(e,t,n){this.cache.set(this.cache.createKey(this.isAllWidget(e,n)?this.getAllWidgetResponseCacheKey(e,t,n):this.getWidgetResponseCacheKey(e,n)),t)}getRequestWidgetFromBatch(e,t){var n;return null===(n=t.batch)||void 0===n?void 0:n.find((({widget:{rfkid:t}={}})=>t===e))}isAllWidget(e,t){return!this.getRequestWidgetFromBatch(e,t)}cacheResponse(e,t,n){this.cache.set(e,t);const{batch:r=[],widget:o}=t;r.length>0?r.forEach((e=>{const{widget:{rfkid:t}}=e;this.cacheWidgetResponse(t,e,n)})):o&&this.cacheWidgetResponse(o.rfkid,t,n)}processResponse(e,t,n){return this.cacheResponse(e,t,n),this.cache.get(e)}}let Ht=new jt;const Lt={get:async(e,t={})=>{const{cacheKey:n,response:r}=Ht.getCachedResponse(e,t);if(r)return Promise.resolve(r);try{const t=await Me.callApi({data:e},{cache:!1}),r=Ht.validateResponse(t,e);return r?Promise.reject(r):Promise.resolve(Ht.processResponse(n,t,e))}catch(e){return Promise.reject(e)}},setProcessor:e=>{Ht=e},getProcessor:()=>Ht},Ft=[];class Mt{static subscribe(e){Ft.push(e)}static async dispatch(e,t){console.debug("SDK ::: dispatcher ::: dispatch",`[${e}]`,t),Ft.forEach((n=>{n.handleAction(e,{...t})}))}}const qt={async getData(e,t){const n=e.getRfkId(),r=$t.getContext(),o=et({context:r.toJson()},e.toJson());Mt.dispatch(ye.REQUEST,{rfkId:n,request:e,pageContext:r,requestPayload:o});try{const s=await Lt.get(o,t);return Mt.dispatch(ye.REQUEST_SUCCESS,{rfkId:n,request:e,pageContext:r,response:s,requestPayload:o}),s}catch(t){return Mt.dispatch(ye.REQUEST_FAIL,{error:t,rfkId:n,request:e,pageContext:r,requestPayload:o}),Promise.reject(t)}}},Gt=Ct(Ot);class Bt extends Gt{}class Jt extends Bt{}const $t=new class{constructor(){var e;(e="initialized")in this?Object.defineProperty(this,e,{value:false,enumerable:!0,configurable:!0,writable:!0}):this[e]=false,this.setContext(new Jt),Mt.subscribe(this),this.onChange=function(e,t,n){let r;return function(...t){const n=this,o=t;clearTimeout(r),r=setTimeout((function(){r=null,e.apply(n,o)}),50)}}(this.onChange.bind(this))}getContext(){return this.context}setContext(e){this.context=e,this.context.addListener(this)}register(e){Mt.subscribe(e)}getDispatcher(){return Mt}processInitializeResponse(e,t){const{batch:n=[],widget:r}=t,o=[],s=[],i=r?[{widget:r}]:n;if(i.length>0){const t=(e.getBatchItems()||[]).map((({widget:{rfkid:e}={}})=>e)).filter((e=>!!e));i.filter((({widget:e})=>!!e)).forEach((({widget:{rfkid:e,used_in:n}})=>{null!=t&&t.includes(e)||n!==it.PAGE?s.push(e):o.push(e)}))}return{widgets:{inPage:o,common:s}}}canPreRender(e){const{type:t,options:{preRender:n=!1}={}}=tt.get(e)||{};return!!t&&n}setupWidgets(e,t){tt.set(e.rfkId,e),this.canPreRender(e.rfkId)&&Mt.dispatch(ye.WIDGET_READY,{rfkId:e.rfkId,options:t})}async initialize(e,t,n,r={}){t.forEach((e=>this.setupWidgets(e,r)));const o=new Ut(n,!r.pageContainerDisabled&&e),s=await qt.getData(o),{widgets:{inPage:i,common:a}}=this.processInitializeResponse(o,s);i.length>0&&Mt.dispatch(ye.PAGE_CONTAINER_READY,{widgets:i,options:r}),a.filter((e=>!this.canPreRender(e))).forEach((e=>{Mt.dispatch(ye.WIDGET_READY,{rfkId:e,options:r})})),this.initialized=!0,Mt.dispatch(ye.INITIALIZED,{})}handleAction(e,t){switch(e){case ye.INITIALIZE:{const{isContainer:e,includeWidgets:n=[],widgets:r=[],options:o}=t;this.initialize(e,r,n,o);break}case ye.ADD_TO_CART:{const{sku:e,quantity:n,price:r,priceOriginal:o,page:s="unknown"}=t;Je([{sku:e,quantity:n,price:r,priceOriginal:o}],s,this.getContext().toJson());break}case ye.ADD_TO_WISHLIST:{const{sku:e,quantity:n,price:r,priceOriginal:o,page:s="unknown"}=t;Je([{sku:e,quantity:n,price:r,priceOriginal:o}],s,this.getContext().toJson());break}case ye.USER_LOGIN:{const{id:e,email:n}=t;ze({id:e,email:n},this.getContext().toJson());break}case ye.CART_STATUS:{const{products:e}=t;$e(e,this.getContext().toJson());break}case ye.ORDER_CONFIRM:{const{products:e,user:n,orderId:r,subtotal:o,total:s}=t;Qe(e,n,{orderId:r,subtotal:o,total:s},this.getContext().toJson());break}}}onChange(e,t,n){this.initialized&&Mt.dispatch(ye.PAGE_CONTEXT_CHANGED,{context:this.context})}};var zt,Yt,Qt,Xt=0,Zt=[],en=v.__b,tn=v.__r,nn=v.diffed,rn=v.__c,on=v.unmount;function sn(e,t){v.__h&&v.__h(Yt,e,Xt||t),Xt=0;var n=Yt.__H||(Yt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function an(e){return Xt=1,cn(kn,e)}function cn(e,t,n){var r=sn(zt++,2);return r.t=e,r.__c||(r.__=[n?n(t):kn(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=Yt),r.__}function ln(e,t){var n=sn(zt++,3);!v.__s&&bn(n.__H,t)&&(n.__=e,n.__H=t,Yt.__H.__h.push(n))}function un(e,t){var n=sn(zt++,4);!v.__s&&bn(n.__H,t)&&(n.__=e,n.__H=t,Yt.__h.push(n))}function pn(e){return Xt=5,hn((function(){return{current:e}}),[])}function dn(e,t,n){Xt=6,un((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))}function hn(e,t){var n=sn(zt++,7);return bn(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function _n(e,t){return Xt=8,hn((function(){return e}),t)}function fn(e){var t=Yt.context[e.__c],n=sn(zt++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Yt)),t.props.value):e.__}function yn(e,t){v.useDebugValue&&v.useDebugValue(t?t(e):e)}function gn(){Zt.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(vn),e.__H.__h.forEach(Cn),e.__H.__h=[]}catch(t){e.__H.__h=[],v.__e(t,e.__v)}})),Zt=[]}v.__b=function(e){Yt=null,en&&en(e)},v.__r=function(e){tn&&tn(e),zt=0;var t=(Yt=e.__c).__H;t&&(t.__h.forEach(vn),t.__h.forEach(Cn),t.__h=[])},v.diffed=function(e){nn&&nn(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==Zt.push(t)&&Qt===v.requestAnimationFrame||((Qt=v.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),mn&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);mn&&(t=requestAnimationFrame(n))})(gn)),Yt=void 0},v.__c=function(e,t){t.some((function(e){try{e.__h.forEach(vn),e.__h=e.__h.filter((function(e){return!e.__||Cn(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],v.__e(n,e.__v)}})),rn&&rn(e,t)},v.unmount=function(e){on&&on(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(vn)}catch(e){v.__e(e,t.__v)}};var mn="function"==typeof requestAnimationFrame;function vn(e){var t=Yt;"function"==typeof e.__c&&e.__c(),Yt=t}function Cn(e){var t=Yt;e.__c=e.__(),Yt=t}function bn(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function kn(e,t){return"function"==typeof t?t(e):t}function En(e,t){for(var n in t)e[n]=t[n];return e}function Sn(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function wn(e){this.props=e}function Tn(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:Sn(this.props,e)}function r(t){return this.shouldComponentUpdate=n,R(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(wn.prototype=new D).isPureReactComponent=!0,wn.prototype.shouldComponentUpdate=function(e,t){return Sn(this.props,e)||Sn(this.state,t)};var Pn=v.__b;v.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Pn&&Pn(e)};var An="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function In(e){function t(t,n){var r=En({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=An,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Rn=function(e,t){return null==e?null:L(L(e).map(t))},On={map:Rn,forEach:Rn,count:function(e){return e?L(e).length:0},only:function(e){var t=L(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:L},xn=v.__e;v.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);xn(e,t,n)};var Nn=v.unmount;function Dn(){this.__u=0,this.t=null,this.__b=null}function Kn(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Vn(e){var t,n,r;function o(o){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return R(n,o)}return o.displayName="Lazy",o.__f=!0,o}function Wn(){this.u=null,this.o=null}v.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Nn&&Nn(e)},(Dn.prototype=new D).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=Kn(r.__v),s=!1,i=function(){s||(s=!0,n.__R=null,o?o(a):a())};n.__R=i;var a=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},c=!0===t.__h;r.__u++||c||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(i,i)},Dn.prototype.componentWillUnmount=function(){this.t=[]},Dn.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=En({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__e&&R(N,null,e.fallback);return o&&(o.__h=null),[R(N,null,t.__e?null:e.children),o]};var Un=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function jn(e){return this.getChildContext=function(){return e.context},e.children}function Hn(e){var t=this,n=e.i;t.componentWillUnmount=function(){Z(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),Z(R(jn,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Ln(e,t){return R(Hn,{__v:e,i:t})}(Wn.prototype=new D).__e=function(e){var t=this,n=Kn(t.__v),r=t.o.get(e);return r[0]++,function(o){var s=function(){t.props.revealOrder?(r.push(o),Un(t,e,r)):o()};n?n(s):s()}},Wn.prototype.render=function(e){this.u=null,this.o=new Map;var t=L(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Wn.prototype.componentDidUpdate=Wn.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Un(e,n,t)}))};var Fn="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Mn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,qn=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};function Gn(e,t,n){return null==t.__k&&(t.textContent=""),Z(e,t),"function"==typeof n&&n(),e?e.__c:null}function Bn(e,t,n){return ee(e,t),"function"==typeof n&&n(),e?e.__c:null}D.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(D.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Jn=v.event;function $n(){}function zn(){return this.cancelBubble}function Yn(){return this.defaultPrevented}v.event=function(e){return Jn&&(e=Jn(e)),e.persist=$n,e.isPropagationStopped=zn,e.isDefaultPrevented=Yn,e.nativeEvent=e};var Qn={configurable:!0,get:function(){return this.class}},Xn=v.vnode;v.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){for(var o in r={},n){var s=n[o];"value"===o&&"defaultValue"in n&&null==s||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===s?s="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!qn(n.type)?o="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(o)?o=o.toLowerCase():Mn.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===s&&(s=void 0),r[o]=s)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=L(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=L(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r}t&&n.class!=n.className&&(Qn.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Qn)),e.$$typeof=Fn,Xn&&Xn(e)};var Zn=v.__r;function er(e){return R.bind(null,e)}function tr(e){return!!e&&e.$$typeof===Fn}function nr(e){return tr(e)?te.apply(null,arguments):e}function rr(e){return!!e.__k&&(Z(null,e),!0)}function or(e){return e&&(e.base||1===e.nodeType&&e)||null}v.__r=function(e){Zn&&Zn(e),e.__c};var sr=function(e,t){return e(t)},ir=N;function ar(){return ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ar.apply(this,arguments)}var cr=new Map,lr=new WeakMap,ur=0;function pr(e,t,n){if(void 0===n&&(n={}),!e)return function(){};var r=function(e){var t=function(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(n=e.root)?(lr.has(n)||(ur+=1,lr.set(n,ur.toString())),lr.get(n)):"0":e[t]);var n})).toString()}(e),n=cr.get(t);if(!n){var r,o=new Map,s=new IntersectionObserver((function(t){t.forEach((function(t){var n,s=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(n=o.get(t.target))||n.forEach((function(e){e(s,t)}))}))}),e);r=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:s,elements:o},cr.set(t,n)}return n}(n),o=r.id,s=r.observer,i=r.elements,a=i.get(e)||[];return i.has(e)||i.set(e,a),a.push(t),s.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(i.delete(e),s.unobserve(e)),0===i.size&&(s.disconnect(),cr.delete(o))}}function dr(e){return"function"!=typeof e.children}var hr=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).node=null,n._unobserveCb=null,n.handleNode=function(e){n.node&&(n.unobserve(),e||n.props.triggerOnce||n.props.skip||n.setState({inView:!!n.props.initialInView,entry:void 0})),n.node=e||null,n.observeNode()},n.handleChange=function(e,t){e&&n.props.triggerOnce&&n.unobserve(),dr(n.props)||n.setState({inView:e,entry:t}),n.props.onChange&&n.props.onChange(e,t)},n.state={inView:!!t.initialInView,entry:void 0},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},o.componentWillUnmount=function(){this.unobserve(),this.node=null},o.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,o=e.trackVisibility,s=e.delay;this._unobserveCb=pr(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r,trackVisibility:o,delay:s})}},o.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},o.render=function(){if(!dr(this.props)){var e=this.state,t=e.inView,n=e.entry;return this.props.children({inView:t,entry:n,ref:this.handleNode})}var r=this.props,o=r.children,s=r.as,i=r.tag,a=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(r,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return R(s||i||"div",ar({ref:this.handleNode},a),o)},r}(D);hr.displayName="InView",hr.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};const _r=ne({}),fr=()=>fn(_r),yr=e=>e(ye.WIDGET_APPEAR,{time:Date.now()}),gr=e=>{const{dispatch:t,options:{visibility:n={}}={}}=fr(),r=e||n,{ref:o,inView:s,entry:i}=function(e){var t=void 0===e?{}:e,n=t.threshold,r=t.delay,o=t.trackVisibility,s=t.rootMargin,i=t.root,a=t.triggerOnce,c=t.skip,l=t.initialInView,u=pn(),p=an({inView:!!l}),d=p[0],h=p[1],_=_n((function(e){void 0!==u.current&&(u.current(),u.current=void 0),c||e&&(u.current=pr(e,(function(e,t){h({inView:e,entry:t}),t.isIntersecting&&a&&u.current&&(u.current(),u.current=void 0)}),{root:i,rootMargin:s,threshold:n,trackVisibility:o,delay:r}))}),[Array.isArray(n)?n.toString():n,i,s,a,c,o,r]);ln((function(){u.current||!d.entry||a||c||h({inView:!!l})}));var f=[_,d.inView,d.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}(r),{manual:a}=r,c=_n((()=>{yr(t)}),[t]);return ln((()=>{a&&s&&yr(t)}),[t,s,i,a]),{ref:o,inView:s,entry:i,trigger:c}};var mr=function(e,t,n,r){var o;t[0]=0;for(var s=1;s<t.length;s++){var i=t[s++],a=t[s]?(t[0]|=i?1:2,n[t[s++]]):t[++s];3===i?r[0]=a:4===i?r[1]=Object.assign(r[1]||{},a):5===i?(r[1]=r[1]||{})[t[++s]]=a:6===i?r[1][t[++s]]+=a+"":i?(o=e.apply(a,mr(e,a,n,["",null])),r.push(o),a[0]?t[0]|=2:(t[s-2]=0,t[s]=o)):r.push(a)}return r},vr=new Map;const Cr=function(e){var t=vr.get(this);return t||(t=new Map,vr.set(this,t)),(t=mr(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,r=1,o="",s="",i=[0],a=function(e){1===r&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,e,o):3===r&&(e||o)?(i.push(3,e,o),r=2):2===r&&"..."===o&&e?i.push(4,e,0):2===r&&o&&!e?i.push(5,0,!0,o):r>=5&&((o||!e&&5===r)&&(i.push(r,0,o,n),r=6),e&&(i.push(r,e,0,n),r=6)),o=""},c=0;c<e.length;c++){c&&(1===r&&a(),a(c));for(var l=0;l<e[c].length;l++)t=e[c][l],1===r?"<"===t?(a(),i=[i],r=3):o+=t:4===r?"--"===o&&">"===t?(r=1,o=""):o=t+o[0]:s?t===s?s="":o+=t:'"'===t||"'"===t?s=t:">"===t?(a(),r=1):r&&("="===t?(r=5,n=o,o=""):"/"===t&&(r<5||">"===e[c][l+1])?(a(),3===r&&(i=i[0]),r=i,(i=i[0]).push(2,0,r),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(a(),r=2):o+=t),3===r&&"!--"===o&&(r=4,i=i[0])}return a(),i}(e)),t),arguments,[])).length>1?t:t[0]}.bind(R),br=(e,t,n)=>{const{mapping:{mapProps:r}={}}=n;return r?r(e,t,n):e.state};function kr(e,t){const n=new e(t);return $t.register(n),n}function Er(e,t,n={}){const r=$t.getDispatcher();let o,s;function i(i){const{manual:a,onUpdate:c,onInView:l,...u}=n.visibility||{};o||(o=kr(e,i.rfkId),s=o.getStore());const p=n.rfkId||i.rfkId;let d=s.getState();const h=(e,t)=>r.dispatch(e,{rfkId:p,...t}),_=a?t:((e,t,{onUpdate:n,onInView:r})=>{const o=o=>{const{ref:s,inView:i,entry:a}=gr(t),c=_n((e=>{if(e)if(1===e.nodeType)s(e);else{const t=or(e);t&&1===t.nodeType&&s(t)}else s(null)}),[s,o.available]);return ln((()=>{i&&r(a),n(i,a)}),[i,a]),R(e,{...o,ref:c})};return o.displayName="withWidgetAppear",o})(t,u,{onInView:()=>{yr(h),l&&l()},onUpdate:(e,t)=>{c&&c(e,t)}}),f=()=>{const e=s.getState();for(const t in e)if(e[t]!==d[t])return d=e,this.setState({});for(const t in d)if(!(t in e))return d=e,this.setState({})};this.componentWillReceiveProps=e=>{i=e,f()},this.componentDidMount=()=>{s.subscribe(f),r.dispatch(ye.LOAD,{...i,rfkId:p})},this.componentWillUnmount=()=>{s.unsubscribe(f)},this.render=e=>{var t,r;return R(_r.Provider,{value:{store:s,rfkId:p,dispatch:h,context:null===(t=o)||void 0===t?void 0:t.getContext(),options:n},children:R(_,Object.assign({rfkId:p,dispatch:h},e,d,br({rfkId:p,state:d,context:null===(r=o)||void 0===r?void 0:r.getContext()},e,n)))})}}return n.rfkId&&(o=kr(e,n.rfkId),s=o.getStore()),(i.prototype=new D).constructor=i}const Sr=class{getWidgetComponentConfig(e){const t=tt.get(e);return t||console.warn(`Widget "${e}" is not supported`),t}setup(e){const t=tt.getController(e),n=this.getWidgetComponentConfig(e);if(t&&n)return this.doSetup(t,n,e)}},wr={visibility:{threshold:.2,triggerOnce:!0}},Tr=class extends Sr{doSetup(e,t,n){const{Component:r,options:o}=t;return Er(e,r,{...et(wr,o),rfkId:n})}},Pr=class{constructor(e){this.widgetFactory=e}render(e,t){const n=this.widgetFactory.setup(e);n&&this.doRender(n,t)}},Ar=class extends Pr{createElement(e){const t=document.createElement("div");return t.dataset.rfkid=e,t}doRender(e,t){const n=Object.keys(t.dataset).filter((e=>e.startsWith("rfkWidget"))).reduce(((e,n)=>{const r=n.replace("rfkWidget",""),o=r.charAt(0).toLowerCase()+r.slice(1);return Object.assign(e,{[o]:t.dataset[n]})}),{});Z(Cr`<${e} ...${n} />`,t)}},Ir=class{constructor(e){this.widgetRenderer=e}render(e,t){for(let n=0;n<e.length;n++){const r=e[n],o=this.widgetRenderer.createElement(r);t.appendChild(o),this.widgetRenderer.render(r,o)}}},Rr=class{constructor(e){this.renderer=new Ir(e)}render(e,t){this.renderer.render(e,t)}},Or=async(e,t,n,r,o)=>{if(e){const s={data:{name:t,type:"widget",value:{rfkid:e,...n?{f:n}:[],...o?{context:o}:[],...r}}};return qe(s)}return Promise.reject(new Error("widget has not been provided"))},xr=async(e,t)=>Or(e,"appear",null,{},t),Nr=async(e,{type:t,subType:n,feature:r},o,s)=>Or(e,"click",r,{click_type:t,click_sub_type:n,...o},s);class Dr{constructor(e){this.store=function(e,t){let n=[];function r(e){const t=[];for(let r=0;r<n.length;r++)n[r]===e?e=null:t.push(n[r]);n=t}return e=e||{},{reset(){e={}},setState:function(r,o){const s=o?r:Object.assign({},e,r);console.debug("SDK ::: store ::: update :::",t,"::: prev",JSON.parse(JSON.stringify(e)),"next",JSON.parse(JSON.stringify(s))),e=s;const i=n;for(let t=0;t<i.length;t++)i[t](e)},subscribe:e=>(n.push(e),()=>{r(e)}),unsubscribe:r,getState:()=>e}}({},e),this.rfkId=e,this.onHandleActions=(e,t)=>{},this.context=new Bt,this.resetRequest()}setState(e){this.store.setState(e)}getState(){return this.store.getState()}getStore(){return this.store}getContext(){return this.context}getContextJson(){return et($t.getContext().toJson(),this.request.toJson("context").context||{})}fetch(e){return qt.getData(this.request,e)}onPageContextChange(){this.fetch()}onWidgetAppear(){xr(this.rfkId,this.getContextJson())}resetRequest(){this.initializeRequest(),this.request.setRfkId(this.rfkId)}reset(){this.store.reset(),this.resetRequest()}handleAction(e,t){const{rfkId:n}=t;if(e===ye.PAGE_CONTEXT_CHANGED&&this.onPageContextChange(),n===this.rfkId){switch(e){case ye.RESET_WIDGET:this.reset();break;case ye.WIDGET_APPEAR:this.onWidgetAppear()}this.handleInternalActions(e,t)}this.onHandleActions(e,t)}setOnHandleActions(e){this.onHandleActions=e}getId(){return this.rfkId}}const Kr=async(e,t,n,r,o,s)=>Nr(e,{type:"facet",subType:t},{click_text_id:n,click_text:r,index:o},s),Vr=async(e,t,n,r)=>Nr(e,{type:"product",subType:"product_switch"},{index:n,products:[{sku:t}]},r),Wr=async(e,t,n,r)=>Nr(e,{type:"product",subType:"product"},{index:n,products:[{sku:t}]},r),Ur=async(e,t,n,r)=>Nr(e,{type:"product",subType:"swatch"},{index:n,products:[{sku:t}]},r),jr=async(e,t,n,r)=>Nr(e,{type:"pagination"},{click_text:n,click_text_id:t},r),Hr=async(e,t,n)=>Nr(e,{type:"close"},{click_text:t},n),Lr=async(e,t,n=0,r="",o="",s)=>e?t?Or(e,"click","sp",{index:n,products:[{sku:t}],kw:r,m:o},s):Promise.reject(new Error("product sku has not been provided")):Promise.reject(new Error("widget has not been provided")),Fr=async(e,t,n,r,o,s)=>Or(e,"click","sp",{w:"facet",type:t,text:n,index:r,tindex:o},s),Mr=async(e,t,n=0,r="",o="",s="",i="",a,c)=>e?Or(e,"click","sb",{index:n,...""!==t?{products:[{sku:t}]}:[],kw:r,m:o,type:i,text:s,...a?{w:a}:[]},c):Promise.reject(new Error("widget has not been provided")),qr=async(e,t=0,n="",r="",o="",s)=>await Mr(e,"",t,n,r,o,"category","suggestion",s),Gr=async(e,t=0,n="",r="",o="",s)=>await Mr(e,"",t,n,r,o,"keyphrase","suggestion",s),Br=async(e,t=0,n="",r="",o="",s)=>Mr(e,"",t,n,r,o,"trending_category","suggestion",s),Jr=async(e,t,n=0,r="",o)=>e?Or(e,"click","rw",{index:n,...t?{products:[{sku:t}]}:[],...""!==r?"prev"===r?{prev:1}:{next:1}:[]},o):Promise.reject(new Error("widget has not been provided")),$r=()=>{Me.clearCache()},zr=e=>{ke("userId",e)},Yr=()=>{const{user_id:e,uuid:t}=xe();return e||t};class Qr extends Dr{initializeRequest(){return this.request=Vt(nt.CONTENT_BLOCK),this}handleInternalActions(e,t){switch(e){case ye.LOAD:this.fetch();break;case ye.REQUEST:this.setState({loading:!0});break;case ye.REQUEST_SUCCESS:{const{appearance:e,appearance:{templates:{html:{devices:{[rt.DESKTOP]:{content:n=null}={}}={}}={},css:{devices:{[rt.DESKTOP]:{content:r=null}={}}={}}={}}={}}={}}=t.response;this.setState({appearance:e,cssContent:r,htmlContent:n,loading:!1,loaded:!0})}}}}const Xr=fe("recommendation"),Zr=Xr("PRODUCT_CLICKED"),eo=Xr("NAVIGATION_NEXT"),to=Xr("NAVIGATION_PREV");class no extends Dr{initializeRequest(){return this.request=Vt(nt.RECOMMENDATION),this}arrowClick({direction:e}){Jr(this.getId(),"",0,e,this.getContextJson()).then((()=>console.debug("RecommendationController ::: trackRecommendationClick finished")))}productClick({sku:e,index:t}){Jr(this.getId(),e,t,"",this.getContextJson()).then((()=>console.debug("RecommendationController ::: trackRecommendationClick finished")))}handleInternalActions(e,t){switch(e){case eo:this.arrowClick({direction:"next"});break;case to:this.arrowClick({direction:"prev"});break;case Zr:this.productClick({...t});break;case ye.LOAD:this.fetch();break;case ye.REQUEST:this.setState({loading:!0});break;case ye.REQUEST_SUCCESS:{const{content:{product:{value:e=[]}={}}={}}=t.response;this.setState({products:e,available:e.length>0,loading:!1,loaded:!0})}}}}const ro=fe("recommendation"),oo=ro("PRODUCT_CLICKED"),so=ro("FACET_CLICKED"),io=ro("SORT_CHANGED"),ao=ro("PAGE_NUMBER_CHANGED"),co=ro("RESULTS_PER_PAGE_CHANGED"),lo=ro("KEYPHRASE_CHANGED"),uo=ro("CLEAR_FILTERS");class po extends Dr{initializeRequest(){return this.request=Vt(nt.SEARCH_RESULTS),this.request.getQueryKeyphrase()&&this.setState({keyphrase:this.request.getQueryKeyphrase()}),this.request.getPageNumber()&&this.setState({page:this.request.getPageNumber()}),this.request.getNumberProducts()&&this.setState({productsPerPage:this.request.getNumberProducts()}),this}resetControls(){this.setPage(1)}setPage(e){this.setState({page:e}),this.request.setPageNumber(e)}setProductsPerPage(e){this.setState({productsPerPage:e}),this.request.setNumberProducts(e)}setKeyphrase(e){this.resetRequest(),this.resetControls(),this.setState({keyphrase:e,facets:this.formatFacetsFromResponse(this.getState().facet)}),this.request.setQueryKeyphrase(e)}setSort(e,t){this.setState({sortType:e,sortDirection:t}),this.request.resetSortCriteria().setSortCriteriaType(e).setSortCriteriaOrder(t)}facetClick({facetType:e,facetValue:t,facetValueIndex:n,valueIndex:r,facetIndex:o,checked:s}){Fr(this.rfkId,e,t,r,o,this.getContextJson()).then((()=>console.debug("SearchController ::: trackFacetClick finished")));const{facet:i,facet:{[e]:{value:a=[]}={}}={}}=this.getState(),{id:c=t}=a[n]||{};this.resetControls(),s?this.request.addFilterValue(e,c):this.request.removeFilterValue(e,c),this.setState({facets:this.formatFacetsFromResponse(i)}),this.fetch()}productClick({sku:e,index:t}){const{keyphrase:n}=this.getState();Lr(this.rfkId,e,t,n,"",this.getContextJson()).then((()=>console.debug("SearchController ::: trackFullPageSearchClick finished")))}pageNumberChange({pageNumber:e}){this.setPage(e),this.fetch()}keyphraseChange({keyphrase:e}){this.setKeyphrase(e),this.fetch()}productsPerPageChange({numProducts:e}){this.setProductsPerPage(e),this.fetch()}sortChange({sortType:e,sortDirection:t}){this.setSort(e,t),this.fetch()}clearFilters(){this.setState({facets:[]}),this.request.resetFilter(),this.fetch()}formatFacetsFromResponse(e={}){const{filter:t={}}=this.request.toJson(),n=[],r=Object.keys(e);for(let o=0;o<r.length;o++){const s={...e[r[o]],facetType:r[o]};s.values=s.value.map(((e,n)=>{const{[r[o]]:{value:s=[]}={}}=t;return{...e,index:n,selected:s.includes(e.id)||s.includes(e.text)}})),n.push(s)}return n}handleInternalActions(e,t){switch(e){case ye.LOAD:this.fetch();break;case ye.REQUEST:this.setState({loading:!0});break;case ye.REQUEST_SUCCESS:{const{sort:{choices:e=this.getState().sortChoices}={},page_number:n,total_item:r,total_page:o,n_item:s,facet:i,content:{product:{value:a=[]}={}}={}}=t.response;this.setState({page:n,products:a,loading:!1,loaded:!0,facets:this.formatFacetsFromResponse(i),facet:i,sortChoices:e,totalPages:o,totalItems:r,numberOfItems:s})}break;case so:this.facetClick({...t});break;case oo:this.productClick({...t});break;case io:this.sortChange({...t});break;case ao:this.pageNumberChange({...t});break;case co:this.productsPerPageChange({...t});break;case lo:this.keyphraseChange({...t});break;case uo:this.clearFilters()}}}const ho=fe("discover"),_o=ho("OPENED"),fo=ho("CLOSED"),yo=ho("PRODUCT_CHANGED"),go=ho("CHOICE_CHANGED"),mo=ho("REFRESH"),vo=ho("NAVIGATION_NEXT"),Co=ho("NAVIGATION_PREV"),bo=class extends Dr{initializeRequest(){return this.request=Vt(nt.DISCOVER),this}setMainProduct({sku:e,productGroup:t}){this.request.resetContextPageProductGroups(),this.request.resetContextPageSkus(),t?this.request.setContextPageProductGroups([t]):e&&this.request.setContextPageSkus([e])}mainProductChange({sku:e,productGroup:t}){this.store.reset(),this.setState({open:!0}),this.setMainProduct({sku:e,productGroup:t})}tabChange({choiceId:e,sku:t,productGroup:n}){this.setMainProduct({sku:t,productGroup:n}),e&&this.request.setFeaturesDiscoverChoiceId(e),this.fetch()}handleProductChange(e){Vr(this.rfkId,e.sku,e.index,this.getContextJson()),this.mainProductChange(e),this.fetch()}handleChoiceChange(e){const{tabs:t=[]}=this.getState(),n=t.findIndex((({choiceId:t})=>t===e.choiceId)),{text:r,textId:o}=t[n]||{};Kr(this.rfkId,e.choiceId,o,r,n,this.getContextJson()),this.tabChange(e)}handleInternalActions(e,t){switch(e){case _o:this.mainProductChange(t),this.fetch({force:!0}),this.setState({open:!0});break;case fo:this.store.reset(),this.resetRequest(),this.setState({open:!1});break;case yo:this.handleProductChange(t);break;case go:this.handleChoiceChange(t);break;case vo:jr(this.rfkId,"next","Next",this.getContextJson());break;case Co:jr(this.rfkId,"prev","Prev",this.getContextJson());break;case mo:this.fetch({force:!0});break;case ye.RESET_WIDGET:Hr(this.rfkId,"Close",this.getContextJson());break;case ye.REQUEST:this.setState({loading:!0,error:null});break;case ye.REQUEST_FAIL:this.setState({error:t.response,loading:!1,loaded:!0});break;case ye.REQUEST_SUCCESS:{var n;const{content:{product:{value:e=[]}={}}={},context_values:{product:{value:o=[]}={}}={},features:{discover:{choices:s=[]}={}}={}}=t.response,i=s.map((({values:[{choice_id:e,selected:t,text:n,text_id:r}]=[]})=>({label:n,choiceId:e,selected:t,text:n,textId:r})));var r;null!==(n=i[0])&&void 0!==n&&n.choiceId&&this.request.setFeaturesDiscoverChoiceId(null===(r=i[0])||void 0===r?void 0:r.choiceId);const a=i.find((({selected:e})=>e)),c=o.length?o[0]:{};this.setState({products:e,loading:!1,loaded:!0,mainProduct:c,selectedTab:null==a?void 0:a.choiceId,tabs:i}),this.setMainProduct({sku:c.sku})}}}},ko=fe("previewSearch"),Eo=ko("SUGGESTION_CHANGED"),So=ko("TRENDING_CATEGORY_CHANGED"),wo=ko("CATEGORY_CHANGED"),To=ko("KEYPHRASE_CHANGED");class Po extends Dr{initializeRequest(){return this.request=Vt(nt.PREVIEW_SEARCH),this}setKeyphrase(e){this.setState({keyphrase:e,selectedKeyword:e})}setCategory(e){this.setState({category:e,selectedKeyword:e})}setSuggestion(e){this.setState({suggestion:e,selectedKeyword:e})}setTrendingCategory(e){this.setState({trendingCategory:e,selectedKeyword:e})}productClick({sku:e,index:t}){const{context:n,keyphrase:r}=this.getState();Mr(this.rfkId,e,t,r,"",n).then((()=>console.debug("PreviewSearchController ::: trackFullPageSearchClick finished")))}keyphraseChange({keyphrase:e}){this.setKeyphrase(e),this.setState({lockSuggestions:!1,lockCategories:!1}),this.request.resetFilterValues("category_names"),this.request.setQueryKeyphrase(e),this.fetch()}categoryChange({category:e}){this.setCategory(e),this.setState({lockSuggestions:!0,lockCategories:!0}),this.request.setFilterValues("category_names",[e]),this.fetch()}suggestionChange({suggestion:e}){this.setSuggestion(e),this.setState({lockSuggestions:!0,lockCategories:!0}),this.request.resetFilterValues("category_names"),this.request.setQueryKeyphrase(e),this.fetch()}trendingCategoryChange({trendingCategory:e}){this.setState({lockSuggestions:!1,lockCategories:!1}),this.setTrendingCategory(e)}handleInternalActions(e,t){switch(e){case ye.REQUEST:this.setState({loading:!0}),console.debug("PreviewSearchController ::: REQUEST");break;case ye.REQUEST_SUCCESS:{const{content:{product:{value:e=[]}={}}={},suggestion:{category:n=[],trending_category:r=[],keyphrase:o=[]}}=t.response,{suggestions:s,lockSuggestions:i,categories:a,lockCategories:c}=this.getState();this.setState({products:e,loading:!1,loaded:!0,categories:c?a:n,trendingCategories:r,suggestions:i?s:o})}break;case ye.PRODUCT_CLICK:this.productClick({...t});break;case To:this.keyphraseChange({...t});break;case wo:console.debug("PreviewSearchController ::: CATEGORY_CHANGED"),this.categoryChange(t);break;case So:console.debug("PreviewSearchController ::: TRENDING_CATEGORY_HOVER"),this.trendingCategoryChange(t);break;case Eo:console.debug("PreviewSearchController ::: SUGGESTION_HOVER"),this.suggestionChange(t)}}}const Ao={[nt.CONTENT_BLOCK]:Qr,[nt.RECOMMENDATION]:no,[nt.SEARCH_RESULTS]:po,[nt.DISCOVER]:bo,[nt.PREVIEW_SEARCH]:Po},Io=e=>Ao[e]||(console.warn(`Unknown type of widget "${e}"`),null);class Ro extends jt{getWidgetType(e,t,n){if(this.isAllWidget(e,n)){const t=tt.getType(e);if(t)return t}return super.getWidgetType(e,t,n)}cacheWidgetResponse(e,t,n){const{type:r,variation_id:o}=t.widget;tt.setMetadata(e,{rfkId:e,type:r,variationId:o}),super.cacheWidgetResponse(e,t,n)}}const{useRef:Oo,useWidgetVisibility:xo,useEffect:No,useLayoutEffect:Do,useWidget:Ko}=a,{useLayoutEffect:Vo}=a,Wo=({htmlContent:e})=>(Vo((()=>{e&&document.head.insertAdjacentHTML("beforeend",e)}),[e]),null),Uo=new Ar(new Tr),jo=new Rr(Uo),Ho={Controller:Qr,Component:({htmlContent:e,cssContent:t,appearance:{css_names:n=[]}={}})=>{const{rfkId:r}=Ko(),{ref:o}=xo(),s=Oo(null);return No((()=>{s.current&&e&&o(s.current.parentNode)}),[s.current,!!e]),Do((()=>{var e;null!==(e=s.current)&&void 0!==e&&e.parentNode&&n.length>0&&s.current.parentNode.classList.add(...n)}),[s.current,n.join("*")]),Do((()=>{s.current&&t&&function(e,t,n){let r=document.querySelector(`[data-rfk-id-style=${e}]`);var o;r||(r=document.createElement("style"),r.setAttribute("type","text/css"),r.dataset.rfkIdStyle=e,null===(o=t.parentNode)||void 0===o||o.appendChild(r)),r.innerHTML=n}(r,s.current,t)}),[s.current,t]),Do((()=>{s.current&&e&&(s.current.innerHTML=e)}),[s.current,e]),Cr`<div ref=${s}></div>`},options:{visibility:{manual:!0}}};class Lo{constructor(){var e;(e="containerRendered")in this?Object.defineProperty(this,e,{value:false,enumerable:!0,configurable:!0,writable:!0}):this[e]=false,$t.getDispatcher().subscribe(this),tt.setTypes({[nt.BANNER]:Ho,[nt.HTML_BLOCK]:Ho,[nt.SEO]:{Controller:Qr,Component:Wo,options:{visibility:{manual:!0}}}})}getContainerNode(){return document.querySelector('[data-rfkid="rfkid_container"]')}isContainer(){return!!this.getContainerNode()}handleAction(e,t){switch(e){case ye.PAGE_CONTAINER_READY:if(this.isContainer()&&!this.containerRendered){const e=this.getContainerNode();e&&(jo.render(t.widgets,e),this.containerRendered=!0)}break;case ye.WIDGET_READY:{const{nodeSelector:e=`[data-rfkid=${t.rfkId}]`}=tt.get(t.rfkId||"")||{},n=document.querySelector(e);t.rfkId&&n&&Uo.render(t.rfkId,n);break}}}}const Fo=e=>{const{includeWidgets:t,widgets:n=[],uri:r=window.location.pathname,...o}=e||{};(({env:e,customerKey:t,apiKey:n,serviceHost:r,useToken:o,userId:s,debug:i,useStorage:a=!1},{processor:c}={})=>{ke("env",e),ke("customerKey",t),ke("apiKey",n),ke("serviceHost",r),ke("useToken",o),ke("userId",s),ke("debug",i),Ae.init(a),c&&Lt.setProcessor(c)})(o,{processor:new Ro});const s=new Lo;$t.getContext().setPageUri(r),$t.getContext().setUserUuid(xe().uuid),Xe($t.getContext().toJson()),$t.getDispatcher().dispatch(ye.INITIALIZE,{widgets:n,includeWidgets:t,isContainer:s.isContainer(),options:e})}})(),RFK=r})();
//# sourceMappingURL=rfk-sdk.js.map